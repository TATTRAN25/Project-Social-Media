{% extends 'base.html' %}

{% load static %}
<link rel="stylesheet" href="{% static 'assets/css/style_post_form.css' %}">

{% block body_block %}
<div class="post-form-container">
    <h1 class="post-form-title">{{ action }} Bài Viết</h1>

    {% if messages %}
    <div class="messages">
        <ul>
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <form method="post" enctype="multipart/form-data" class="post-form">
        {% csrf_token %}
        
        <div class="form-group">
            {{ form.title.label }}
            {{ form.title }}
            {{ form.title.errors }}
        </div>

        <div class="form-group">
            {{ form.content.label }}
            {{ form.content }}
            {{ form.content.errors }}
        </div>

        <div class="form-group">
            {{ form.image.label }}
            {{ form.image }}
            {{ form.image.errors }}
        </div>

        <div class="form-group">
            {{ form.view_mode.label }}
            {{ form.view_mode }}
            {{ form.view_mode.errors }}
        </div>

        <button type="submit" class="btn post-submit-btn">{{ action }}</button>
    </form>

    {% if post %}
    <hr class="post-divider">
    <h2 class="current-post-title">Thông Tin Bài Viết Hiện Tại</h2>
    <h3 class="current-post-subtitle">Tên bài viết: {{ post.title }}</h3>
    <p class="current-post-content">Nội dung: {{ post.content }}</p>
    {% if post.image %}
    <img src="{{ post.image.url }}" alt="Hình ảnh bài viết" class="current-post-image">
    {% endif %}
    <p class="current-post-author"><strong>Tác giả:</strong> {{ post.author.username }}</p>
    {% endif %}
</div>
{% endblock %}